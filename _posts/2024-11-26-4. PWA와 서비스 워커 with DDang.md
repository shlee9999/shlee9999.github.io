---
layout: post
title: "4. PWA와 서비스 워커 with DDang"
categories: [["DDang", "개발일지"]]
tags: ["PWA", "FCM", "Service Worker",]

---


## DDang에 PWA를 도입했던 이유
---

단순히 “접근성이 좋아진다”, “웹 서비스를 앱처럼 사용할 수 있다”, “오프라인에서 서비스 이용이 가능하다”는 말에 DDang 프로젝트에 PWA를 일단 도입했었습니다. 현재 프로젝트 중반이고, 슬슬 푸시 알림을 구현할 때가 되어 개인적으로 이 중  가장 추상적이라고 생각되는 “오프라인에서 서비스 이용이 가능하다”라는 말에 대해 고민해볼 때가 되었다고 생각하여 이 글을 작성하게 되었습니다. 

## 오프라인의 의미
---

“PWA는 오프라인에서 서비스 이용이 가능하다”는 말을 되뇌이며 생각하며 글을 작성하던 도중 문득 생각이 들었습니다. “웹사이트가 꺼진다고 해서 오프라인 상태인가?” 이에 대한 저의 답은 “아니다” 였습니다. 온라인/오프라인은 디바이스의 네트워크 연결 상태를 기준으로 판단하는 것입니다. 웹사이트를 끈다고 디바이스의 네트워크 연결이 끊어지는 것이 아니기 때문에 웹사이트가 켜져 있는지 꺼져 있는지는 온라인/오프라인 판단과 무관합니다. 

이 글에서 오프라인은 디바이스의 네트워크 연결이 끊어진 상태, 백그라운드는 웹사이트를 닫은 상태를 의미한다고 생각해주시면 이해하기 수월하실 겁니다.

## 서비스 워커(Service Worker)란?
---

서비스 워커란 브라우저가 백그라운드에서 실행하는 스크립트입니다. 서비스 워커를 이용하면 웹 서비스에서도 백그라운드 동기화, 푸시 알림 등을 사용할 수 있습니다. 생명 주기가 웹페이지와 완전히 별개이며, 웹 페이지가 닫힌다고 해도 비활성화되지 않습니다. PWA는 이 서비스워커의 백그라운드 동작에서 더 나아가 오프라인 동작까지 구현한 고도화된 서비스워커라 이해했습니다. PWA의 오프라인 캐싱 기능을 이용하면 웹사이트를 빠르게 로딩할 수 있으며, 오프라인에서 작업한 내용들을 온라인 상태가 되면 서비스워커가 자동으로 처리하는 매우 편리한 기능도 존재합니다. 서비스워커에 관한 디테일한 것들은 이후 포스팅에 추가하겠습니다.

## 왜 DDang 프로젝트에서 PWA를 사용해야 하는가?
---

DDang은 반려견 산책 웹 서비스입니다. 규칙적인 산책에 있어 핵심 기능 중 하나인 푸시 알림을 완벽하게 구현해야 하므로 PWA를 사용해야 했습니다. **FCM(Firebase Cloud Messaging)**만으로 충분하다고 생각하실 수 있지만, iOS에서는 PWA가 아닌 이상 푸시 알림을 받을 수 없는 제약이 있어 PWA로 개발해야만 했습니다. FCM은 푸시 알림을 손쉽게 구현할 수 있는 Firebase 서비스이고 다음 포스팅에서 다룰 예정입니다.

### 푸시 알림 테스트

**윈도우 - PWA로 설치하지 않고 알림 권한 허용만으로도 푸시알림 가능**

![{4B2C516C-5AC1-4C5A-A9A5-F6268FE1EE65}.png](../assets/img/2024-11-26-4.%20PWA와%20서비스%20워커%20with%20DDang/4B2C516C-5AC1-4C5A-A9A5-F6268FE1EE65.png)

**iOS - PWA로 설치하고 알림 권한도 허용해야 푸시 알림 가능**

![image.png](../assets/img/2024-11-26-4.%20PWA와%20서비스%20워커%20with%20DDang/image.png)

다음 포스팅에서는 Vite React 환경에서 FCM으로 푸시알림 보내는 법을 알아보겠습니다.

🌟 부족한 글 읽어주셔서 감사합니다. 😀

> P.S. 블로그 규칙을 토요일 업로드가 아니라 일주일에 한 번 이상 업로드로 바꾸었습니다. 글을 쓸 만 하다는 생각이 나면 바로바로 쓰다보니 정해진 요일에 쓰는 건 의미가 별로 없다고 생각했어요😀

## 회고
---

- **Keep**
    - PWA와 관련된 주요 개념들을 명확하게 설명하는 방식
    - 실제 프로젝트(DDang)에 적용한 경험을 바탕으로 한 실용적인 내용
    - 스크린샷을 활용한 시각적 예시 제공
- **Problem**
    - 서비스 워커에 대한 설명이 다소 간략함
    - FCM에 대한 설명이 부족함
    - PWA의 다른 이점들에 대한 언급이 적음
- **Try**
    - 다음 포스팅에서 서비스 워커에 대한 더 자세한 설명 추가
    - FCM에 대한 기본적인 설명과 PWA와의 연관성 설명 추가
    - PWA의 다른 이점들(예: 설치 가능성, 빠른 로딩 속도 등)에 대해 간단히 언급

## 참고
---

- [ServiceWorker 이모저모 이야기](https://so-so.dev/web/service-worker/)

- [MDN](https://developer.mozilla.org/ko/docs/Web/Progressive_web_apps/Tutorials/js13kGames/Offline_Service_workers)